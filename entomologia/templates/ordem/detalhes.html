{% load static %}
<!DOCTYPE html>
<html lang="{{ request.session.lang }}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{% static 'entomologia/styles_ordem_detalhes.css' %}">
  <title>
    {% if request.session.lang == 'en' %}
      Entomology - Order Details - {{ ordem.nome }}
    {% else %}
      Entomologia - Detalhes da Ordem - {{ ordem.nome }}
    {% endif %}
  </title>
</head>
<body>
  <header class="header">
    <a href="/entomologia" class="site-title">
      {% if request.session.lang == 'en' %}
        Entomology
      {% else %}
        Entomologia
      {% endif %}
    </a>
    <div class="language-toggle" style="display: flex; gap: 10px;">
      {% if request.session.lang == 'en' %}
        <!-- Se o site está em inglês, mostra a bandeira de Português para alternar -->
        <a href="{% url 'change_language' 'pt' %}">
          <img src="{% static 'entomologia/images/pt.png' %}" alt="Português" style="width: 30px; height: 30px;">
        </a>
      {% else %}
        <!-- Se o site está em Português, mostra a bandeira de Inglês para alternar -->
        <a href="{% url 'change_language' 'en' %}">
          <img src="{% static 'entomologia/images/en.png' %}" alt="English" style="width: 30px; height: 30px;">
        </a>
      {% endif %}
    </div>
  </header>

  <div class="container">
    <a href="{% url 'listar_ordens' %}" class="back-button">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M19 12H5M12 19l-7-7 7-7"></path>
      </svg>
      {% if request.session.lang == 'en' %}
        Back to search
      {% else %}
        Voltar para pesquisa
      {% endif %}
    </a>

    <div class="order-header">
      <div class="order-icon">
        <img src="{{ ordem.imagem.url }}" alt="{{ ordem.nome }}">
      </div>
      <div class="order-title">
        <h1>{{ ordem.nome }}</h1>
      </div>
    </div>

    <!-- Galeria de imagens -->
    <div class="gallery-container">
      <div class="gallery-scroll" id="gallery">
        {% for image in gallery_images %}
          <div class="gallery-item">
            <img src="{{ image.imagem.url }}" alt="{{ ordem.nome }} - {% if request.session.lang == 'en' %}Image{% else %}Imagem{% endif %} {{ forloop.counter }}" class="gallery-image" data-info-image="{{ image.imagem.url }}">
          </div>
        {% endfor %}
      </div>
      <div class="gallery-nav">
        <button id="prevBtn" aria-label="{% if request.session.lang == 'en' %}Previous{% else %}Anterior{% endif %}">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <button id="nextBtn" aria-label="{% if request.session.lang == 'en' %}Next{% else %}Próximo{% endif %}">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="9 18 15 12 9 6"></polyline>
          </svg>
        </button>
      </div>
    </div>

    <!-- Conteúdo principal -->
    <div class="content-container">
      <!-- Seção de Descrição -->
      <div class="description-section">
        <h2>
          {% if request.session.lang == 'en' %}
            Order Description
          {% else %}
            Descrição sobre a ordem
          {% endif %}
        </h2>
        {% if request.session.lang == 'en' %}
          {% if ordem.description %}
            <pre>{{ ordem.description }}</pre>
          {% else %}
            <p>Description not available.</p>
          {% endif %}
        {% else %}
          {% if ordem.descricao %}
            <pre>{{ ordem.descricao }}</pre>
          {% else %}
            <p>Descrição não disponível.</p>
          {% endif %}
        {% endif %}
      </div>
      
      <!-- Espécies disponíveis -->
      <div class="description-section">
        <h2>
          {% if request.session.lang == 'en' %}
            Available Species
          {% else %}
            Espécies disponíveis
          {% endif %}
        </h2>
        {% if ordem.especies.all %}
          <div class="especies">
            <ul class="especies-list">
              {% for especie in ordem.especies.all %}
                <li>
                  <a href="#" class="especie-link" data-info-image="{{ especie.imagem.url }}">
                    {{ especie.nome }}
                  </a>
                </li>
              {% endfor %}
            </ul>
          </div>
        {% else %}
          {% if request.session.lang == 'en' %}
            <p>No available species.</p>
          {% else %}
            <p>Nenhuma espécie disponível.</p>
          {% endif %}
        {% endif %}
      </div>
    </div>
  </div>

  <!-- Modal Global para exibição de imagens ampliadas -->
  <div id="globalImageModal" class="global-modal">
    <div class="global-modal-content">
      <span class="close-button">&times;</span>
      <img id="globalModalImage" src="" alt="{% if request.session.lang == 'en' %}Enlarged image{% else %}Imagem ampliada{% endif %}">
    </div>
  </div>

  <!-- Scripts -->
  <script src="{% static 'entomologia/scripts_ordem_detalhes.js' %}"></script>

  <!-- Popup feedback -->
      <div id="feedback-popup">
        <div class="popup-container">
            <span id="close-popup" class="close-button">&times;</span>
            <h2>Sua opinião é importante!</h2>
            <p>Nos conte sua experiência preenchendo o formulário abaixo.</p>
            <p>Se ainda está conhecendo, você pode acessar depois o formulário na seção de contato da página inicial!</p>
            <a href="https://docs.google.com/forms/d/e/1FAIpQLSc8p_p-erAgVesFfPrxC8ogVD5CgFBWIajGn-WgrAy801caDQ/viewform?usp=header" class="contact-link">
                <button class="feedback-button">Acessar formulário</button>
            </a>
          </div>
      </div>  
</body>
</html>
